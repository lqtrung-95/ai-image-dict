(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function c({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>c,"CardDescription",()=>i,"CardHeader",()=>l,"CardTitle",()=>r])},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},2747,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,t.cn)("bg-accent animate-pulse rounded-md",e),...a})}e.s(["Skeleton",()=>a])},86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},51312,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016),l=e.i(15288),r=e.i(19455),i=e.i(2747),c=e.i(27516),d=e.i(27612),n=e.i(86536),o=e.i(75157),m=e.i(11795),h=e.i(46696);function x(){let[e,x]=(0,t.useState)([]),[u,p]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{let e=(0,m.createClient)(),{data:s,error:t}=await e.from("photo_analyses").select("*, detected_objects(id)").order("created_at",{ascending:!1});t?console.error("Failed to fetch analyses:",t):x(s||[]),p(!1)})()},[]);let f=async e=>{let s=(0,m.createClient)();x(s=>s.filter(s=>s.id!==e));let{error:t}=await s.from("photo_analyses").delete().eq("id",e);if(t){console.error("Failed to delete analysis:",t),h.toast.error("Failed to delete");let{data:e}=await s.from("photo_analyses").select("*, detected_objects(id)").order("created_at",{ascending:!1});x(e||[])}else h.toast.success("Analysis deleted")};return u?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"History"}),(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,s.jsxs)(l.Card,{className:"bg-slate-800/50 border-slate-700 overflow-hidden",children:[(0,s.jsx)(i.Skeleton,{className:"aspect-video bg-slate-700"}),(0,s.jsxs)("div",{className:"p-4 space-y-2",children:[(0,s.jsx)(i.Skeleton,{className:"h-4 w-3/4 bg-slate-700"}),(0,s.jsx)(i.Skeleton,{className:"h-3 w-1/2 bg-slate-700"})]})]},t))})]}):(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:"History"}),(0,s.jsxs)("p",{className:"text-slate-400",children:[e.length," analyses"]})]})}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-800 flex items-center justify-center",children:(0,s.jsx)(c.History,{className:"w-8 h-8 text-slate-500"})}),(0,s.jsx)("h2",{className:"text-xl font-medium text-white mb-2",children:"No history yet"}),(0,s.jsx)("p",{className:"text-slate-400 mb-6",children:"Your analyzed photos will appear here"}),(0,s.jsx)(a.default,{href:"/capture",children:(0,s.jsx)(r.Button,{className:"bg-purple-600 hover:bg-purple-700",children:"Capture Your First Photo"})})]}):(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)(l.Card,{className:"group bg-slate-800/50 border-slate-700 overflow-hidden hover:border-purple-500/50 transition-colors flex flex-col",children:[(0,s.jsxs)("div",{className:"relative aspect-[4/3] bg-slate-700 flex-shrink-0",children:[(0,s.jsx)("img",{src:e.image_url,alt:"Analysis",className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"}),(0,s.jsxs)("div",{className:"hidden md:flex absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-colors items-center justify-center gap-2 opacity-0 group-hover:opacity-100",children:[(0,s.jsx)(a.default,{href:`/analysis/${e.id}`,children:(0,s.jsxs)(r.Button,{size:"sm",className:"bg-white/90 text-slate-900 hover:bg-white",children:[(0,s.jsx)(n.Eye,{className:"w-4 h-4 mr-1"}),"View"]})}),(0,s.jsx)(r.Button,{size:"sm",variant:"destructive",onClick:()=>f(e.id),children:(0,s.jsx)(d.Trash2,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,s.jsx)("p",{className:"text-white font-medium line-clamp-2 min-h-[3rem]",children:e.scene_context?.description||"Photo analysis"}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-400",children:(0,o.formatDate)(e.created_at)}),(0,s.jsxs)("span",{className:"text-sm text-purple-400 font-medium",children:[e.detected_objects?.length||0," words"]})]}),(0,s.jsxs)("div",{className:"flex md:hidden items-center gap-2 mt-3 pt-3 border-t border-slate-700",children:[(0,s.jsx)(a.default,{href:`/analysis/${e.id}`,className:"flex-1",children:(0,s.jsxs)(r.Button,{size:"sm",className:"w-full bg-purple-600 hover:bg-purple-700",children:[(0,s.jsx)(n.Eye,{className:"w-4 h-4 mr-1"}),"View"]})}),(0,s.jsx)(r.Button,{size:"sm",variant:"outline",className:"border-red-500/50 text-red-400 hover:bg-red-500/10",onClick:()=>f(e.id),children:(0,s.jsx)(d.Trash2,{className:"w-4 h-4"})})]})]})]},e.id))})]})}e.s(["default",()=>x])}]);
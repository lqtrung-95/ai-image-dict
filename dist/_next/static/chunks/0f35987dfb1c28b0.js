(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),t=e.i(75157);function a({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...a})}function c({className:e,...a}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>c,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},18566,(e,s,t)=>{s.exports=e.r(76562)},31278,e=>{"use strict";var s=e.i(17521);e.s(["Loader2",()=>s.default])},43531,e=>{"use strict";var s=e.i(78745);e.s(["Check",()=>s.default])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},70273,e=>{"use strict";let s=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>s],70273)},31343,e=>{"use strict";let s=(0,e.i(75254).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>s],31343)},92930,e=>{"use strict";let s=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>s],92930)},15957,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(22016),l=e.i(19455),i=e.i(15288),c=e.i(71689),d=e.i(10980),n=e.i(61911),o=e.i(70273),x=e.i(92930),u=e.i(31278),m=e.i(43531),h=e.i(31343),p=e.i(46696);let b=["bg-green-500/20 text-green-400 border-green-500/30","bg-emerald-500/20 text-emerald-400 border-emerald-500/30","bg-blue-500/20 text-blue-400 border-blue-500/30","bg-purple-500/20 text-purple-400 border-purple-500/30","bg-orange-500/20 text-orange-400 border-orange-500/30","bg-red-500/20 text-red-400 border-red-500/30"];function f(){let e=(0,a.useParams)(),f=(0,a.useRouter)(),j=e.id,[g,N]=(0,t.useState)(null),[w,v]=(0,t.useState)(!0),[y,C]=(0,t.useState)(!1),[k,S]=(0,t.useState)(0),[L,_]=(0,t.useState)(!1),E=(0,t.useCallback)(async()=>{try{let e=await fetch(`/api/courses/${j}`);if(!e.ok){if(404===e.status)return void f.push("/courses");throw Error("Failed to fetch course")}let s=await e.json();N(s),s.userRating&&S(s.userRating.rating)}catch(e){console.error("Failed to fetch course:",e),p.toast.error("Failed to load course")}finally{v(!1)}},[j,f]);(0,t.useEffect)(()=>{E()},[E]);let F=async()=>{C(!0);try{if(!(await fetch(`/api/courses/${j}/subscribe`,{method:g?.subscription?"DELETE":"POST"})).ok)throw Error("Failed to update subscription");p.toast.success(g?.subscription?"Unsubscribed from course":"Subscribed to course!"),E()}catch{p.toast.error("Failed to update subscription")}finally{C(!1)}},P=async e=>{S(e),_(!0);try{if(!(await fetch(`/api/courses/${j}/rate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:e})})).ok)throw Error("Failed to rate course");p.toast.success("Rating submitted!"),E()}catch{p.toast.error("Failed to submit rating")}finally{_(!1)}};if(w)return(0,s.jsx)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsx)(u.Loader2,{className:"w-8 h-8 animate-spin text-purple-400"})})});if(!g)return null;let{course:T,words:A,subscription:B}=g,O=b[T.difficultyLevel-1]||b[0];return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)(r.default,{href:"/courses",className:"inline-flex items-center text-slate-400 hover:text-white mb-4",children:[(0,s.jsx)(c.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back to Courses"]}),(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-white",children:T.name}),(0,s.jsxs)("span",{className:`text-xs px-2 py-1 rounded-full border ${O}`,children:["HSK ",T.difficultyLevel]})]}),(0,s.jsxs)("p",{className:"text-slate-400 mb-2",children:["by ",T.creatorName]}),T.description&&(0,s.jsx)("p",{className:"text-slate-300",children:T.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-4 text-sm text-slate-400",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.BookOpen,{className:"w-4 h-4"}),T.wordCount," words"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(n.Users,{className:"w-4 h-4"}),T.subscriberCount," subscribers"]}),null!==T.ratingAvg&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(o.Star,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),T.ratingAvg.toFixed(1)," (",T.ratingCount," reviews)"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[T.isOwner&&(0,s.jsx)(r.default,{href:`/courses/${T.id}/edit`,children:(0,s.jsxs)(l.Button,{variant:"ghost",className:"text-slate-300",children:[(0,s.jsx)(x.Edit2,{className:"w-4 h-4 mr-2"}),"Edit"]})}),(0,s.jsx)(l.Button,{onClick:F,disabled:y,className:B?"bg-slate-600 hover:bg-slate-700":"bg-purple-600 hover:bg-purple-700",children:y?(0,s.jsx)(u.Loader2,{className:"w-4 h-4 animate-spin"}):B?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Check,{className:"w-4 h-4 mr-2"}),"Subscribed"]}):"Subscribe"})]})]}),B&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-slate-400",children:"Your Progress"}),(0,s.jsxs)("span",{className:"text-sm text-purple-400",children:[B.words_learned," / ",T.wordCount," words learned"]})]}),(0,s.jsx)("div",{className:"h-2 bg-slate-700 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${B.progress_percent}%`}})}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)(l.Button,{className:"bg-purple-600 hover:bg-purple-700",children:[(0,s.jsx)(h.Play,{className:"w-4 h-4 mr-2"}),"Practice Words"]})})]})]}),B&&(0,s.jsxs)(i.Card,{className:"p-4 bg-slate-800/50 border-slate-700 mb-6",children:[(0,s.jsx)("h3",{className:"font-medium text-white mb-3",children:"Rate this course"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>P(e),disabled:L,className:"transition-transform hover:scale-110",children:(0,s.jsx)(o.Star,{className:`w-8 h-8 ${e<=k?"text-yellow-400 fill-yellow-400":"text-slate-600"}`})},e)),L&&(0,s.jsx)(u.Loader2,{className:"w-5 h-5 animate-spin text-slate-400 ml-2"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4",children:["Vocabulary (",A.length," words)"]}),(0,s.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>(0,s.jsx)(i.Card,{className:"p-4 bg-slate-800/30 border-slate-700 hover:border-slate-600",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-slate-500 text-sm w-6",children:t+1}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl font-medium text-white",children:e.word_zh}),(0,s.jsx)("span",{className:"text-slate-400",children:e.word_pinyin}),e.hsk_level&&(0,s.jsxs)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300",children:["HSK ",e.hsk_level]})]}),(0,s.jsx)("p",{className:"text-slate-400",children:e.word_en}),e.example_sentence&&(0,s.jsx)("p",{className:"text-sm text-slate-500 mt-1",children:e.example_sentence})]})]})},e.id))})]})]})}e.s(["default",()=>f])}]);
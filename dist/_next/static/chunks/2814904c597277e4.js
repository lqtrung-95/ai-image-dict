(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55764,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>a])},15288,e=>{"use strict";var t=e.i(43476),s=e.i(75157);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},18566,(e,t,s)=>{t.exports=e.r(76562)},41947,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["default",()=>t])},43531,e=>{"use strict";var t=e.i(78745);e.s(["Check",()=>t.default])},82373,e=>{"use strict";let t=(0,e.i(75254).default)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);e.s(["Volume2",()=>t],82373)},31812,e=>{"use strict";var t=e.i(71645),s=e.i(41931);function a(){let e=(0,t.useRef)(null),a=(0,t.useRef)(null),r=(0,t.useCallback)(()=>{e.current&&(e.current.pause(),e.current.src="",e.current=null),a.current&&(URL.revokeObjectURL(a.current),a.current=null)},[]);(0,t.useEffect)(()=>()=>{r()},[r]);let l=(0,t.useCallback)(async t=>{try{r();let l=await (0,s.apiFetch)("/api/tts",{method:"POST",body:JSON.stringify({text:t,lang:"zh-CN"})});if(!l.ok)return!1;let i=await l.blob(),n=URL.createObjectURL(i);a.current=n;let c=new Audio(n);return e.current=c,c.onended=()=>{r()},c.onerror=()=>{r()},await c.play(),!0}catch(e){return console.warn("Google TTS failed, falling back to Web Speech:",e),r(),!1}},[r]),i=(0,t.useCallback)((e,t="zh-CN")=>{if(!("speechSynthesis"in window))return void console.warn("Speech synthesis not supported");speechSynthesis.cancel();let s=new SpeechSynthesisUtterance(e);s.lang=t,s.rate=.8;let a=speechSynthesis.getVoices().find(e=>e.lang.startsWith("zh")||e.lang.startsWith("cmn"));a&&(s.voice=a),speechSynthesis.speak(s)},[]);return{speak:(0,t.useCallback)(async(e,t="zh-CN")=>{await l(e)||i(e,t)},[l,i]),stop:(0,t.useCallback)(()=>{r(),"speechSynthesis"in window&&speechSynthesis.cancel()},[r])}}e.s(["useSpeech",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},55711,e=>{"use strict";let t=(0,e.i(75254).default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);e.s(["Brain",()=>t],55711)},64030,e=>{"use strict";let t=(0,e.i(75254).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);e.s(["Trophy",()=>t],64030)},58377,e=>{"use strict";let t=(0,e.i(75254).default)("flame",[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]]);e.s(["Flame",()=>t],58377)},67240,e=>{"use strict";let t=(0,e.i(75254).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>t],67240)},22679,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(19455),l=e.i(15288),i=e.i(31812),n=e.i(82373),c=e.i(43531),d=e.i(37727),o=e.i(75157);function h({words:e,onAnswer:a,onComplete:l}){let{speak:h}=(0,i.useSpeech)(),[x,u]=(0,s.useState)(0),[m,p]=(0,s.useState)([]),[b,f]=(0,s.useState)(null),[g,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),y=e[x],v=(x+1)/e.length*100,k=(0,s.useCallback)(()=>{if(!y)return;let t=e.filter(e=>e.id!==y.id).sort(()=>Math.random()-.5).slice(0,3);p([y,...t].sort(()=>Math.random()-.5))},[y,e]);(0,s.useEffect)(()=>{k(),f(null),j(!1)},[x,k]);let C=async()=>{y&&(N(!0),await h(y.word_zh),setTimeout(()=>N(!1),1e3))};return y?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Multiple Choice"}),(0,t.jsxs)("span",{className:"text-slate-400",children:[x+1," / ",e.length]})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-700 rounded-full mb-8 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300",style:{width:`${v}%`}})}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"What does this mean?"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold text-white",children:y.word_zh}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:C,className:(0,o.cn)("h-10 w-10 rounded-full",w?"text-purple-400 bg-purple-500/20":"text-slate-400 hover:text-white"),children:(0,t.jsx)(n.Volume2,{className:"w-5 h-5"})})]}),(0,t.jsx)("p",{className:"text-purple-400 text-lg mt-2",children:y.word_pinyin})]}),(0,t.jsx)("div",{className:"space-y-3 mb-6",children:m.map(e=>{let s=b===e.id,r=e.id===y.id,l="bg-slate-800/50 border-slate-700 hover:border-purple-500/50";return g&&r?l="bg-green-500/20 border-green-500":g&&s&&!r&&(l="bg-red-500/20 border-red-500"),(0,t.jsx)("button",{onClick:()=>{g||(f(e.id),j(!0),a(e.id===y.id))},disabled:g,className:(0,o.cn)("w-full p-4 rounded-xl border text-left transition-all",l,g&&"cursor-default"),children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-white text-lg",children:e.word_en}),g&&r&&(0,t.jsx)(c.Check,{className:"w-5 h-5 text-green-400"}),g&&s&&!r&&(0,t.jsx)(d.X,{className:"w-5 h-5 text-red-400"})]})},e.id)})}),g&&(0,t.jsx)(r.Button,{onClick:()=>{x<e.length-1?u(e=>e+1):l()},className:"w-full h-12 bg-purple-600 hover:bg-purple-700 text-lg",children:x<e.length-1?"Next":"See Results"})]}):null}var x=e.i(16715);function u({words:e,onAnswer:a,onComplete:l}){let{speak:h}=(0,i.useSpeech)(),[u,m]=(0,s.useState)(0),[p,b]=(0,s.useState)([]),[f,g]=(0,s.useState)(null),[j,w]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[v,k]=(0,s.useState)(!1),C=e[u],S=(u+1)/e.length*100,M=(0,s.useCallback)(()=>{if(!C)return;let t=e.filter(e=>e.id!==C.id).sort(()=>Math.random()-.5).slice(0,3);b([C,...t].sort(()=>Math.random()-.5))},[C,e]);(0,s.useEffect)(()=>{M(),g(null),w(!1),k(!1)},[u,M]),(0,s.useEffect)(()=>{if(C&&!v){let e=setTimeout(()=>{z(),k(!0)},500);return()=>clearTimeout(e)}},[C,v]);let z=async()=>{C&&(y(!0),await h(C.word_zh),setTimeout(()=>y(!1),1e3))};return C?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Listening Quiz"}),(0,t.jsxs)("span",{className:"text-slate-400",children:[u+1," / ",e.length]})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-700 rounded-full mb-8 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${S}%`}})}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("p",{className:"text-slate-400 mb-6",children:"Listen and choose the correct word"}),(0,t.jsx)("button",{onClick:z,className:(0,o.cn)("w-24 h-24 rounded-full mx-auto flex items-center justify-center transition-all",N?"bg-blue-500 text-white scale-110":"bg-slate-800 text-blue-400 hover:bg-blue-500/20 hover:scale-105"),children:N?(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"w-1.5 h-6 bg-white rounded animate-pulse"}),(0,t.jsx)("div",{className:"w-1.5 h-8 bg-white rounded animate-pulse delay-75"}),(0,t.jsx)("div",{className:"w-1.5 h-5 bg-white rounded animate-pulse delay-150"})]}):(0,t.jsx)(n.Volume2,{className:"w-10 h-10"})}),(0,t.jsxs)("p",{className:"text-slate-500 text-sm mt-4 flex items-center justify-center gap-1",children:[(0,t.jsx)(x.RefreshCw,{className:"w-3 h-3"}),"Tap to play again"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:p.map(e=>{let s=f===e.id,r=e.id===C.id,l="bg-slate-800/50 border-slate-700 hover:border-blue-500/50";return j&&r?l="bg-green-500/20 border-green-500":j&&s&&!r&&(l="bg-red-500/20 border-red-500"),(0,t.jsxs)("button",{onClick:()=>{j||(g(e.id),w(!0),a(e.id===C.id))},disabled:j,className:(0,o.cn)("p-4 rounded-xl border text-center transition-all",l,j&&"cursor-default"),children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-white mb-1",children:e.word_zh}),j&&(0,t.jsx)("p",{className:"text-sm text-slate-400",children:e.word_pinyin}),j&&r&&(0,t.jsx)(c.Check,{className:"w-5 h-5 text-green-400 mx-auto mt-2"}),j&&s&&!r&&(0,t.jsx)(d.X,{className:"w-5 h-5 text-red-400 mx-auto mt-2"})]},e.id)})}),j&&(0,t.jsxs)("div",{className:"text-center mb-6 p-4 rounded-xl bg-slate-800/50 border border-slate-700",children:[(0,t.jsx)("p",{className:"text-slate-400 text-sm",children:"The answer was"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-white",children:C.word_zh}),(0,t.jsx)("p",{className:"text-blue-400",children:C.word_pinyin}),(0,t.jsx)("p",{className:"text-slate-300",children:C.word_en})]}),j&&(0,t.jsx)(r.Button,{onClick:()=>{u<e.length-1?m(e=>e+1):l()},className:"w-full h-12 bg-blue-600 hover:bg-blue-700 text-lg",children:u<e.length-1?"Next":"See Results"})]}):null}var m=e.i(55764);function p(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z]/g,"")}function b({words:e,onAnswer:a,onComplete:l}){let{speak:h}=(0,i.useSpeech)(),x=(0,s.useRef)(null),[u,b]=(0,s.useState)(0),[f,g]=(0,s.useState)(""),[j,w]=(0,s.useState)(!1),[N,y]=(0,s.useState)(!1),[v,k]=(0,s.useState)(!1),C=e[u],S=(u+1)/e.length*100;(0,s.useEffect)(()=>{g(""),w(!1),y(!1),setTimeout(()=>x.current?.focus(),100)},[u]);let M=async()=>{C&&(k(!0),await h(C.word_zh),setTimeout(()=>k(!1),1e3))};return C?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Type Pinyin"}),(0,t.jsxs)("span",{className:"text-slate-400",children:[u+1," / ",e.length]})]}),(0,t.jsx)("div",{className:"h-2 bg-slate-700 rounded-full mb-8 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-300",style:{width:`${S}%`}})}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:"Type the pinyin for this word"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)("h1",{className:"text-6xl font-bold text-white",children:C.word_zh}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:M,className:(0,o.cn)("h-10 w-10 rounded-full",v?"text-green-400 bg-green-500/20":"text-slate-400 hover:text-white"),children:(0,t.jsx)(n.Volume2,{className:"w-5 h-5"})})]}),(0,t.jsx)("p",{className:"text-slate-500 text-sm mt-2",children:C.word_en})]}),(0,t.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),j||!f.trim())return;let t=p(f)===p(C.word_pinyin);y(t),w(!0),a(t)},className:"mb-6",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Input,{ref:x,type:"text",value:f,onChange:e=>g(e.target.value),placeholder:"Type pinyin here...",disabled:j,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,className:(0,o.cn)("h-14 text-xl text-center bg-slate-800/50 border-slate-600 text-white placeholder:text-slate-500",j&&N&&"border-green-500 bg-green-500/10",j&&!N&&"border-red-500 bg-red-500/10")}),j&&(0,t.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:N?(0,t.jsx)(c.Check,{className:"w-6 h-6 text-green-400"}):(0,t.jsx)(d.X,{className:"w-6 h-6 text-red-400"})})]}),!j&&(0,t.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,t.jsx)(r.Button,{type:"button",onClick:()=>{w(!0),y(!1),a(!1)},variant:"outline",className:"flex-1 h-12 border-slate-600 text-slate-300",children:"Skip"}),(0,t.jsx)(r.Button,{type:"submit",disabled:!f.trim(),className:"flex-1 h-12 bg-green-600 hover:bg-green-700",children:"Check"})]})]}),j&&(0,t.jsx)("div",{className:(0,o.cn)("text-center mb-6 p-4 rounded-xl border",N?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"),children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-green-400 font-medium",children:"Correct! ðŸŽ‰"}),(0,t.jsx)("p",{className:"text-white text-lg mt-1",children:C.word_pinyin})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-red-400 font-medium",children:"Not quite"}),(0,t.jsxs)("p",{className:"text-slate-400 text-sm mt-1",children:["You typed: ",(0,t.jsx)("span",{className:"text-white",children:f||"(skipped)"})]}),(0,t.jsxs)("p",{className:"text-slate-400 text-sm",children:["Correct answer: ",(0,t.jsx)("span",{className:"text-green-400 font-medium",children:C.word_pinyin})]})]})}),j&&(0,t.jsx)(r.Button,{onClick:()=>{u<e.length-1?b(e=>e+1):l()},className:"w-full h-12 bg-green-600 hover:bg-green-700 text-lg",children:u<e.length-1?"Next":"See Results"}),!j&&(0,t.jsx)("p",{className:"text-center text-slate-500 text-sm",children:'ðŸ’¡ Tone marks are optional (e.g., "nihao" or "nÇ hÇŽo")'})]}):null}var f=e.i(55711),g=e.i(75254);let j=(0,g.default)("headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),w=(0,g.default)("keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);var N=e.i(64030),y=e.i(67240),v=e.i(71689),k=e.i(58377),C=e.i(46696),S=e.i(41931);let M={purple:"from-purple-500/20 to-purple-500/5 border-purple-500/30 hover:border-purple-500/50",blue:"from-blue-500/20 to-blue-500/5 border-blue-500/30 hover:border-blue-500/50",green:"from-green-500/20 to-green-500/5 border-green-500/30 hover:border-green-500/50"},z={purple:"text-purple-400",blue:"text-blue-400",green:"text-green-400"},T=[{id:"multiple-choice",title:"Multiple Choice",description:"Choose the correct translation",icon:f.Brain,color:"purple"},{id:"listening",title:"Listening",description:"Listen and pick the right word",icon:j,color:"blue"},{id:"type-pinyin",title:"Type Pinyin",description:"Type the pronunciation",icon:w,color:"green"}];function B(){let e=(0,a.useRouter)(),[i,n]=(0,s.useState)("select"),[c,d]=(0,s.useState)([]),[o,x]=(0,s.useState)(!0),[m,p]=(0,s.useState)({correct:0,incorrect:0,total:0}),[g,j]=(0,s.useState)(!1),[w,B]=(0,s.useState)(0),[_]=(0,s.useState)(Date.now()),A=(0,s.useCallback)(async()=>{x(!0);try{let e=await (0,S.apiFetch)("/api/vocabulary?limit=20");if(e.ok){let t=[...(await e.json()).items].sort(()=>Math.random()-.5);d(t.slice(0,Math.min(10,t.length)))}}catch(e){console.error("Failed to fetch words:",e)}finally{x(!1)}},[]);(0,s.useEffect)(()=>{A()},[A]);let R=async()=>{try{let e=Math.floor((Date.now()-_)/1e3),t=await (0,S.apiFetch)("/api/stats",{method:"POST",body:JSON.stringify({wordsPracticed:m.total,wordsKnown:m.correct,durationSeconds:e})});if(t.ok){let e=await t.json();B(e.currentStreak),e.currentStreak>1&&C.toast.success(`ðŸ”¥ ${e.currentStreak} day streak!`)}}catch(e){console.error("Failed to record session:",e)}},L=e=>{p(t=>({...t,correct:t.correct+ +!!e,incorrect:t.incorrect+ +!e,total:t.total+1}))},q=()=>{j(!0),R()},F=()=>{"select"===i?e.push("/"):(n("select"),p({correct:0,incorrect:0,total:0}),j(!1))};if(o)return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"Quiz"}),(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-24 bg-slate-800/50 rounded-xl animate-pulse"},e))})]});if(c.length<4)return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"Quiz"}),(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-800 flex items-center justify-center",children:(0,t.jsx)(f.Brain,{className:"w-8 h-8 text-slate-500"})}),(0,t.jsx)("h2",{className:"text-xl font-medium text-white mb-2",children:"Need more words"}),(0,t.jsx)("p",{className:"text-slate-400 mb-6",children:"Add at least 4 words to your vocabulary to start quizzing!"}),(0,t.jsx)(r.Button,{onClick:()=>e.push("/capture"),className:"bg-purple-600 hover:bg-purple-700",children:"Capture Photo"})]})]});if(g){let e=Math.round(m.correct/m.total*100);return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-6",children:"Quiz Complete!"}),(0,t.jsxs)(l.Card,{className:"bg-slate-800/50 border-slate-700 p-8 text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:e>=80?"ðŸŽ‰":e>=60?"ðŸ‘":"ðŸ’ª"}),(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:(0,t.jsx)(N.Trophy,{className:"w-10 h-10 text-white"})}),(0,t.jsxs)("h2",{className:"text-3xl font-bold text-white mb-2",children:[e,"% Correct!"]}),(0,t.jsxs)("p",{className:"text-slate-400 mb-4",children:["You answered ",m.correct," of ",m.total," correctly"]}),w>0&&(0,t.jsxs)("div",{className:"inline-flex items-center gap-2 bg-orange-500/20 text-orange-400 px-4 py-2 rounded-full mb-6",children:[(0,t.jsx)(k.Flame,{className:"w-5 h-5"}),(0,t.jsxs)("span",{className:"font-bold",children:[w," day streak!"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-500/30",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-green-400",children:m.correct}),(0,t.jsx)("p",{className:"text-sm text-green-400/80",children:"Correct"})]}),(0,t.jsxs)("div",{className:"bg-red-500/10 rounded-xl p-4 border border-red-500/30",children:[(0,t.jsx)("p",{className:"text-3xl font-bold text-red-400",children:m.incorrect}),(0,t.jsx)("p",{className:"text-sm text-red-400/80",children:"Incorrect"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(r.Button,{onClick:()=>{p({correct:0,incorrect:0,total:0}),j(!1),A()},variant:"outline",className:"flex-1 border-slate-600 text-slate-200",children:[(0,t.jsx)(y.RotateCcw,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,t.jsx)(r.Button,{onClick:()=>n("select"),className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"New Quiz"})]})]})]})}return"select"===i?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:F,className:"text-slate-400 hover:text-white -ml-2 mb-4",children:[(0,t.jsx)(v.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Choose Quiz Mode"}),(0,t.jsxs)("p",{className:"text-slate-400 mb-6",children:["Test your knowledge with ",c.length," words"]}),(0,t.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,t.jsx)("button",{onClick:()=>n(e.id),className:`w-full p-5 rounded-xl bg-gradient-to-b border text-left transition-all ${M[e.color]}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-slate-800/50 flex items-center justify-center",children:(0,t.jsx)(e.icon,{className:`w-6 h-6 ${z[e.color]}`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-slate-400",children:e.description})]})]})},e.id))})]}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6 max-w-lg",children:[(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:F,className:"text-slate-400 hover:text-white -ml-2 mb-4",children:[(0,t.jsx)(v.ArrowLeft,{className:"w-4 h-4 mr-1"}),"Back to modes"]}),"multiple-choice"===i&&(0,t.jsx)(h,{words:c,onAnswer:L,onComplete:q}),"listening"===i&&(0,t.jsx)(u,{words:c,onAnswer:L,onComplete:q}),"type-pinyin"===i&&(0,t.jsx)(b,{words:c,onAnswer:L,onComplete:q})]})}e.s(["default",()=>B],22679)}]);
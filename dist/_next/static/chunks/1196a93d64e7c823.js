(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80696,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(19455),s=e.i(68553);let l=(0,e.i(75254).default)("switch-camera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);var n=e.i(37727),i=e.i(63209),o=e.i(75157);function c({onCapture:e,onClose:c,className:d}){let{videoRef:u,error:m,isReady:h,startCamera:b,stopCamera:v,switchCamera:f,capturePhoto:x}=function(){let e=(0,r.useRef)(null),[t,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)("environment"),d=(0,r.useCallback)(async(r="environment")=>{try{l(null),i(!1),t&&t.getTracks().forEach(e=>e.stop());let s=await navigator.mediaDevices.getUserMedia({video:{facingMode:r,width:{ideal:1920},height:{ideal:1080}},audio:!1});e.current?(e.current.srcObject=s,await new Promise((t,r)=>{let a=e.current;if(!a)return void r(Error("Video element not found"));let s=()=>{a.removeEventListener("canplay",s),a.removeEventListener("error",l),t()},l=()=>{a.removeEventListener("canplay",s),a.removeEventListener("error",l),r(Error("Video failed to load"))};a.addEventListener("canplay",s),a.addEventListener("error",l)}),e.current?(await e.current.play(),a(s),c(r),i(!0)):s.getTracks().forEach(e=>e.stop())):s.getTracks().forEach(e=>e.stop())}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;l(e instanceof Error?"NotAllowedError"===e.name?"Camera access denied. Please enable camera permissions in your browser settings.":"NotFoundError"===e.name?"No camera found on this device.":`Camera error: ${e.message}`:"Failed to access camera"),i(!1)}},[t]),u=(0,r.useCallback)(()=>{t&&(t.getTracks().forEach(e=>e.stop()),a(null)),e.current&&(e.current.srcObject=null),i(!1)},[t]),m=(0,r.useCallback)(()=>{d("user"===o?"environment":"user")},[o,d]),h=(0,r.useCallback)(()=>{if(!e.current||!n)return null;let t=e.current,r=document.createElement("canvas");r.width=t.videoWidth,r.height=t.videoHeight;let a=r.getContext("2d");return a?("user"===o&&(a.translate(r.width,0),a.scale(-1,1)),a.drawImage(t,0,0),r.toDataURL("image/jpeg",.85)):null},[n,o]);return(0,r.useEffect)(()=>()=>{t&&t.getTracks().forEach(e=>e.stop())},[t]),{videoRef:e,stream:t,error:s,isReady:n,facingMode:o,startCamera:d,stopCamera:u,switchCamera:m,capturePhoto:h}}(),g=(0,r.useRef)(!1);return((0,r.useEffect)(()=>(g.current||(g.current=!0,b("environment")),()=>{v()}),[]),m)?(0,t.jsxs)("div",{className:(0,o.cn)("flex flex-col items-center justify-center p-8 text-center",d),children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4",children:(0,t.jsx)(i.AlertCircle,{className:"w-8 h-8 text-red-400"})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Camera Access Required"}),(0,t.jsx)("p",{className:"text-slate-400 mb-4 max-w-sm",children:m}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.Button,{onClick:()=>b("environment"),className:"bg-purple-600 hover:bg-purple-700",children:"Try Again"}),c&&(0,t.jsx)(a.Button,{variant:"outline",onClick:c,className:"border-slate-600",children:"Cancel"})]})]}):(0,t.jsxs)("div",{className:(0,o.cn)("relative bg-black rounded-xl overflow-hidden",d),children:[(0,t.jsx)("video",{ref:u,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(1)"}}),!h&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Initializing camera..."})]})}),h&&(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)(a.Button,{variant:"outline",size:"icon",onClick:f,className:"rounded-full bg-white/10 border-white/20 text-white hover:bg-white/20",children:(0,t.jsx)(l,{className:"w-5 h-5"})}),(0,t.jsx)(a.Button,{size:"lg",onClick:()=>{let t=x();t&&(v(),e(t))},className:"rounded-full w-16 h-16 bg-white hover:bg-slate-100 text-slate-900",children:(0,t.jsx)(s.Camera,{className:"w-6 h-6"})}),c&&(0,t.jsx)(a.Button,{variant:"outline",size:"icon",onClick:()=>{v(),c()},className:"rounded-full bg-white/10 border-white/20 text-white hover:bg-white/20",children:(0,t.jsx)(n.X,{className:"w-5 h-5"})})]})}),h&&(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4 w-8 h-8 border-l-2 border-t-2 border-white/50"}),(0,t.jsx)("div",{className:"absolute top-4 right-4 w-8 h-8 border-r-2 border-t-2 border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-20 left-4 w-8 h-8 border-l-2 border-b-2 border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-4 w-8 h-8 border-r-2 border-b-2 border-white/50"})]})]})}e.s(["CameraCapture",()=>c],80696)}]);